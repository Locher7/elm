{"ast":null,"code":"import { ref, inject, onMounted, watch, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport qs from 'qs';\nimport Footer from '../components/Footer.vue';\nexport default {\n  name: 'EditUserAddress',\n  components: {\n    Footer\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const businessId = ref(route.query.businessId);\n    const daId = ref(sessionStorage.getItem('daId'));\n    const user = ref(JSON.parse(sessionStorage.getItem('user')));\n    const deliveryAddress = ref({});\n\n    // 页面初始化时请求即将更改地址信息\n    onMounted(async () => {\n      let url = `http://localhost:10500/DeliveryAddressController/getDeliveryAddressById/${daId.value}`;\n      try {\n        const response = await axios.get(url);\n        deliveryAddress.value = response.data.result;\n      } catch (error) {\n        console.error(error);\n      }\n    });\n\n    // 更改地址方法\n    const editUserAddress = () => {\n      if (deliveryAddress.contactName == '') {\n        alert('联系人姓名不能为空');\n        return;\n      }\n      if (deliveryAddress.contactTel == '') {\n        alert('联系人电话不能为空');\n        return;\n      }\n      if (deliveryAddress.address == '') {\n        alert('联系人地址不能为空');\n        return;\n      }\n\n      //更改地址请求\n      let url = `http://localhost:10500/DeliveryAddressController/updateDeliveryAddress/${daId.value}/${deliveryAddress.value.contactName}/${deliveryAddress.value.contactSex}/${deliveryAddress.value.contactTel}/${deliveryAddress.value.address}`;\n      axios.put(url).then(response => {\n        if (response.data.result > 0) {\n          router.go(-1);\n        } else {\n          alert('更新地址失败!');\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n    return {\n      businessId,\n      daId,\n      user,\n      deliveryAddress,\n      editUserAddress\n    };\n  }\n};","map":{"version":3,"names":["ref","inject","onMounted","watch","computed","useRoute","useRouter","axios","qs","Footer","name","components","setup","route","router","businessId","query","daId","sessionStorage","getItem","user","JSON","parse","deliveryAddress","url","value","response","get","data","result","error","console","editUserAddress","contactName","alert","contactTel","address","contactSex","put","then","go","catch"],"sources":["F:\\elmprogram\\elm\\elmclient\\src\\views\\EditUserAddress.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\t\t<!-- header -->\r\n\t\t<header>\r\n\t\t\t<p>编辑收货地址</p>\r\n\t\t</header>\r\n\r\n\t\t<!-- 表单部分 -->\r\n\t\t<ul class=\"form-box\">\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"title\">联系人: </div>\r\n\t\t\t\t<div class=\"content\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"deliveryAddress.contactName\" placeholder=\"联系人姓名\">\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"title\">性别: </div>\r\n\t\t\t\t<div class=\"content\" style=\"font-size: 3vw;\">\r\n\t\t\t\t\t<input type=\"radio\" v-model=\"deliveryAddress.contactSex\" value=\"1\" style=\"width: 6vw;height: 3.2vw;\">男\r\n\t\t\t\t\t<input type=\"radio\" v-model=\"deliveryAddress.contactSex\" value=\"0\" style=\"width: 6vw;height: 3.2vw;\">女\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"title\">电话: </div>\r\n\t\t\t\t<div class=\"content\">\r\n\t\t\t\t\t<input type=\"content\" v-model=\"deliveryAddress.contactTel\" placeholder=\"电话\">\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"title\">收货地址: </div>\r\n\t\t\t\t<div class=\"content\">\r\n\t\t\t\t\t<input type=\"content\" v-model=\"deliveryAddress.address\" placeholder=\"收货地址\">\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\r\n\t\t<!-- 更新按钮 -->\r\n\t\t<div class=\"button-update\">\r\n\t\t\t<button @click=\"editUserAddress\">更新</button>\r\n\t\t</div>\r\n\r\n\t\t<!-- 底部菜单 -->\r\n\t\t<Footer></Footer>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tref,\r\n\t\tinject,\r\n\t\tonMounted,\r\n\t\twatch,\r\n\t\tcomputed\r\n\t} from 'vue';\r\n\timport {\r\n\t\tuseRoute\r\n\t} from 'vue-router';\r\n\timport {\r\n\t\tuseRouter\r\n\t} from 'vue-router';\r\n\timport axios from 'axios';\r\n\timport qs from 'qs';\r\n\timport Footer from '../components/Footer.vue';\r\n\texport default {\r\n\t\tname: 'EditUserAddress',\r\n\t\tcomponents: {\r\n\t\t\tFooter\r\n\t\t},\r\n\t\tsetup() {\r\n\t\t\tconst route = useRoute();\r\n\t\t\tconst router = useRouter();\r\n\t\t\tconst businessId = ref(route.query.businessId);\r\n\t\t\tconst daId = ref(sessionStorage.getItem('daId'));\r\n\t\t\tconst user = ref(JSON.parse(sessionStorage.getItem('user')));\r\n\t\t\tconst deliveryAddress = ref({})\r\n\r\n\t\t\t// 页面初始化时请求即将更改地址信息\r\n\t\t\tonMounted(async () => {\r\n\t\t\t\tlet url = `http://localhost:10500/DeliveryAddressController/getDeliveryAddressById/${daId.value}`;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await axios.get(url);\r\n\t\t\t\t\tdeliveryAddress.value = response.data.result;\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// 更改地址方法\r\n\t\t\tconst editUserAddress = () => {\r\n\t\t\t\tif (deliveryAddress.contactName == '') {\r\n\t\t\t\t\talert('联系人姓名不能为空');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (deliveryAddress.contactTel == '') {\r\n\t\t\t\t\talert('联系人电话不能为空');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (deliveryAddress.address == '') {\r\n\t\t\t\t\talert('联系人地址不能为空');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//更改地址请求\r\n\t\t\t\tlet url = `http://localhost:10500/DeliveryAddressController/updateDeliveryAddress/${daId.value}/${deliveryAddress.value.contactName}/${deliveryAddress.value.contactSex}/${deliveryAddress.value.contactTel}/${deliveryAddress.value.address}`;\r\n\t\t\t\taxios.put(url).then(response => {\r\n\t\t\t\t\tif (response.data.result > 0) {\r\n\t\t\t\t\t\trouter.go(-1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert('更新地址失败!')\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tbusinessId,\r\n\t\t\t\tdaId,\r\n\t\t\t\tuser,\r\n\t\t\t\tdeliveryAddress,\r\n\t\t\t\teditUserAddress\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.wrapper {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/****************** header ****************/\r\n\t.wrapper header {\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097ff;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 表单部分 ****************/\r\n\r\n\t.wrapper .form-box {\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 20vw;\r\n\t}\r\n\r\n\t.wrapper .form-box li {\r\n\t\tbox-sizing: border-box;\r\n\t\tmargin: 6vw 10vw 0 10vw;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tborder: #f4eeee solid;\r\n\t\tborder-width: 0px 0px 1.8px 0px;\r\n\t}\r\n\r\n\t.wrapper .form-box li .title {\r\n\t\tmargin: 2vw 0vw;\r\n\t\tflex: 0 0 18vw;\r\n\t\tfont-size: 3.8vw;\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.wrapper .form-box li .content {\r\n\t\tflex: 1;\r\n\t\tmargin: 2vw 0vw 2vw 2vw;\r\n\t}\r\n\r\n\t.wrapper .form-box li .content input {\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t\twidth: 100%;\r\n\t\theight: 4vw;\r\n\t\tfont-size: 3.5vw;\r\n\t\tbackground-color: transparent;\r\n\t}\r\n\r\n\t.wrapper .button-update {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 10vw 10vw 0 10vw;\r\n\t}\r\n\r\n\t.wrapper .button-update button {\r\n\t\twidth: 100%;\r\n\t\theight: 13vw;\r\n\t\tfont-size: 5vw;\r\n\t\tfont-weight: 550;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #0097ff;\r\n\t\tborder-radius: 50px;\r\n\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t}\r\n</style>\r\n"],"mappings":"AAgDC,SACCA,GAAG,EACHC,MAAM,EACNC,SAAS,EACTC,KAAK,EACLC,QAAO,QACD,KAAK;AACZ,SACCC,QAAO,QACD,YAAY;AACnB,SACCC,SAAQ,QACF,YAAY;AACnB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,EAAC,MAAO,IAAI;AACnB,OAAOC,MAAK,MAAO,0BAA0B;AAC7C,eAAe;EACdC,IAAI,EAAE,iBAAiB;EACvBC,UAAU,EAAE;IACXF;EACD,CAAC;EACDG,KAAKA,CAAA,EAAG;IACP,MAAMC,KAAI,GAAIR,QAAQ,CAAC,CAAC;IACxB,MAAMS,MAAK,GAAIR,SAAS,CAAC,CAAC;IAC1B,MAAMS,UAAS,GAAIf,GAAG,CAACa,KAAK,CAACG,KAAK,CAACD,UAAU,CAAC;IAC9C,MAAME,IAAG,GAAIjB,GAAG,CAACkB,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IAChD,MAAMC,IAAG,GAAIpB,GAAG,CAACqB,IAAI,CAACC,KAAK,CAACJ,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;IAC5D,MAAMI,eAAc,GAAIvB,GAAG,CAAC,CAAC,CAAC;;IAE9B;IACAE,SAAS,CAAC,YAAY;MACrB,IAAIsB,GAAE,GAAK,2EAA0EP,IAAI,CAACQ,KAAM,EAAC;MACjG,IAAI;QACH,MAAMC,QAAO,GAAI,MAAMnB,KAAK,CAACoB,GAAG,CAACH,GAAG,CAAC;QACrCD,eAAe,CAACE,KAAI,GAAIC,QAAQ,CAACE,IAAI,CAACC,MAAM;MAC7C,EAAE,OAAOC,KAAK,EAAE;QACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACrB;IACD,CAAC,CAAC;;IAEF;IACA,MAAME,eAAc,GAAIA,CAAA,KAAM;MAC7B,IAAIT,eAAe,CAACU,WAAU,IAAK,EAAE,EAAE;QACtCC,KAAK,CAAC,WAAW,CAAC;QAClB;MACD;MACA,IAAIX,eAAe,CAACY,UAAS,IAAK,EAAE,EAAE;QACrCD,KAAK,CAAC,WAAW,CAAC;QAClB;MACD;MACA,IAAIX,eAAe,CAACa,OAAM,IAAK,EAAE,EAAE;QAClCF,KAAK,CAAC,WAAW,CAAC;QAClB;MACD;;MAEA;MACA,IAAIV,GAAE,GAAK,0EAAyEP,IAAI,CAACQ,KAAM,IAAGF,eAAe,CAACE,KAAK,CAACQ,WAAY,IAAGV,eAAe,CAACE,KAAK,CAACY,UAAW,IAAGd,eAAe,CAACE,KAAK,CAACU,UAAW,IAAGZ,eAAe,CAACE,KAAK,CAACW,OAAQ,EAAC;MAC9O7B,KAAK,CAAC+B,GAAG,CAACd,GAAG,CAAC,CAACe,IAAI,CAACb,QAAO,IAAK;QAC/B,IAAIA,QAAQ,CAACE,IAAI,CAACC,MAAK,GAAI,CAAC,EAAE;UAC7Bf,MAAM,CAAC0B,EAAE,CAAC,CAAC,CAAC,CAAC;QACd,OAAO;UACNN,KAAK,CAAC,SAAS;QAChB;MACD,CAAC,CAAC,CAACO,KAAK,CAACX,KAAI,IAAK;QACjBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACrB,CAAC,CAAC;IACH;IAEA,OAAO;MACNf,UAAU;MACVE,IAAI;MACJG,IAAI;MACJG,eAAe;MACfS;IACD;EAED;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}