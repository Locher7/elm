{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, inject, onMounted, watch, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport qs from 'qs';\nimport Footer from '../components/Footer.vue';\nexport default {\n  name: 'UserAddress',\n  components: {\n    Footer\n  },\n  setup() {\n    const businessId = ref('');\n    const user = ref({});\n    const router = useRouter();\n    const deliveryAddressArr = ref([]);\n    onMounted(() => {\n      user.value = JSON.parse(sessionStorage.getItem('user'));\n      listDeliveryAddressByUserId();\n    });\n\n    // 计算性别\n    const contactSex = index => {\n      return deliveryAddressArr.value[index].contactSex === 1 ? '先生' : '女士';\n    };\n\n    // 请求全部地址信息\n    const listDeliveryAddressByUserId = () => {\n      axios.post('DeliveryAddressController/listDeliveryAddressByUserId', qs.stringify({\n        userId: user.value.userId\n      })).then(response => {\n        deliveryAddressArr.value = response.data;\n        // console.log('地址信息:', deliveryAddressArr.value);\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n    const toAddUserAddress = () => {\n      router.push({\n        path: '/addUserAddress'\n      });\n      sessionStorage.setItem('businessId', businessId);\n    };\n    const editUserAddress = daId => {\n      router.push({\n        path: '/editUserAddress'\n      });\n      sessionStorage.setItem('daId', daId);\n    };\n    const removeUserAddress = daId => {\n      if (!confirm('确认要删除此送货地址吗?')) {\n        return;\n      }\n      // 删除地址请求\n      axios.post('DeliveryAddressController/removeDeliveryAddress', qs.stringify({\n        daId: daId\n      })).then(response => {\n        if (response.data > 0) {\n          let deliveryAddress = localStorage.getItem(user.value.userId);\n          if (deliveryAddress != null && deliveryAddress.daId == daId) {\n            removeLocalStorage(user.value.userId);\n          }\n          listDeliveryAddressByUserId();\n        } else {\n          alert('删除地址失败!');\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n    return {\n      businessId,\n      user,\n      deliveryAddressArr,\n      contactSex,\n      listDeliveryAddressByUserId,\n      toAddUserAddress,\n      editUserAddress,\n      removeUserAddress\n    };\n  }\n};","map":{"version":3,"names":["ref","inject","onMounted","watch","computed","useRouter","axios","qs","Footer","name","components","setup","businessId","user","router","deliveryAddressArr","value","JSON","parse","sessionStorage","getItem","listDeliveryAddressByUserId","contactSex","index","post","stringify","userId","then","response","data","catch","error","console","toAddUserAddress","push","path","setItem","editUserAddress","daId","removeUserAddress","confirm","deliveryAddress","localStorage","removeLocalStorage","alert"],"sources":["F:\\elmprogram\\elm\\elmclient\\src\\views\\MyAddress.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\t\t<!-- header -->\r\n\t\t<header>\r\n\t\t\t<p>地址管理</p>\r\n\t\t</header>\r\n\r\n\t\t<!-- 地址列表 -->\r\n\t\t<ul class=\"address\">\r\n\t\t\t<li v-for=\"(item,index) in deliveryAddressArr\" :key=\"item.id\">\r\n\t\t\t\t<div class=\"address-info\">\r\n\t\t\t\t\t<div class=\"address-info-detailed\">\r\n\t\t\t\t\t\t<p>{{ item.contactName }}{{ contactSex(index) }}</p>\r\n\t\t\t\t\t\t<p>{{ item.contactTel }}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p>{{ item.address }}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"address-icon\">\r\n\t\t\t\t\t<i class=\"fa fa-edit\" @click=\"editUserAddress(item.daId)\"></i>\r\n\t\t\t\t\t<i class=\"fa fa-remove\" @click=\"removeUserAddress(item.daId)\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\r\n\t\t<!-- 新增地址 -->\r\n\t\t<div class=\"address-new\" @click=\"toAddUserAddress\">\r\n\t\t\t<i class=\"fa fa-plus-circle\"></i>\r\n\t\t\t<p>新增收货地址</p>\r\n\t\t</div>\r\n\r\n\t\t<!-- 底部菜单部分 -->\r\n\t\t<Footer></Footer>\r\n\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tref,\r\n\t\tinject,\r\n\t\tonMounted,\r\n\t\twatch,\r\n\t\tcomputed\r\n\t} from 'vue';\r\n\timport {\r\n\t\tuseRouter\r\n\t} from 'vue-router';\r\n\timport axios from 'axios';\r\n\timport qs from 'qs';\r\n\timport Footer from '../components/Footer.vue';\r\n\r\n\texport default {\r\n\t\tname: 'UserAddress',\r\n\t\tcomponents: {\r\n\t\t\tFooter\r\n\t\t},\r\n\t\tsetup() {\r\n\t\t\tconst businessId = ref('');\r\n\t\t\tconst user = ref({});\r\n\t\t\tconst router = useRouter();\r\n\t\t\tconst deliveryAddressArr = ref([])\r\n\r\n\t\t\tonMounted(() => {\r\n\t\t\t\tuser.value = JSON.parse(sessionStorage.getItem('user'));\r\n\t\t\t\tlistDeliveryAddressByUserId();\r\n\t\t\t});\r\n\r\n\t\t\t// 计算性别\r\n\t\t\tconst contactSex = (index) => {\r\n\t\t\t\treturn deliveryAddressArr.value[index].contactSex === 1 ? '先生' : '女士';\r\n\t\t\t};\r\n\r\n\t\t\t// 请求全部地址信息\r\n\t\t\tconst listDeliveryAddressByUserId = () => {\r\n\t\t\t\taxios.post('DeliveryAddressController/listDeliveryAddressByUserId', qs.stringify({\r\n\t\t\t\t\tuserId: user.value.userId\r\n\t\t\t\t})).then(response => {\r\n\t\t\t\t\tdeliveryAddressArr.value = response.data;\r\n\t\t\t\t\t// console.log('地址信息:', deliveryAddressArr.value);\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\r\n\t\t\tconst toAddUserAddress = () => {\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tpath: '/addUserAddress'\r\n\t\t\t\t});\r\n\t\t\t\tsessionStorage.setItem('businessId', businessId);\r\n\t\t\t};\r\n\r\n\t\t\tconst editUserAddress = (daId) => {\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tpath: '/editUserAddress',\r\n\t\t\t\t});\r\n\t\t\t\tsessionStorage.setItem('daId', daId);\r\n\t\t\t};\r\n\r\n\t\t\tconst removeUserAddress = (daId) => {\r\n\t\t\t\tif (!confirm('确认要删除此送货地址吗?')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 删除地址请求\r\n\t\t\t\taxios.post('DeliveryAddressController/removeDeliveryAddress', qs.stringify({\r\n\t\t\t\t\tdaId: daId,\r\n\t\t\t\t})).then(response => {\r\n\t\t\t\t\tif (response.data > 0) {\r\n\t\t\t\t\t\tlet deliveryAddress = localStorage.getItem(user.value.userId);\r\n\t\t\t\t\t\tif (deliveryAddress != null && deliveryAddress.daId == daId) {\r\n\t\t\t\t\t\t\tremoveLocalStorage(user.value.userId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlistDeliveryAddressByUserId();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert('删除地址失败!');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\treturn {\r\n\t\t\t\tbusinessId,\r\n\t\t\t\tuser,\r\n\t\t\t\tdeliveryAddressArr,\r\n\t\t\t\tcontactSex,\r\n\t\t\t\tlistDeliveryAddressByUserId,\r\n\t\t\t\ttoAddUserAddress,\r\n\t\t\t\teditUserAddress,\r\n\t\t\t\tremoveUserAddress\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/****************** 总容器 ****************/\r\n\t.wrapper {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #F5F4F6;\r\n\t}\r\n\r\n\t/****************** header ****************/\r\n\t.wrapper header {\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097ff;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 地址列表 ****************/\r\n\t.wrapper .address {\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 12vw;\r\n\t\tmargin-bottom: 4vw;\r\n\t}\r\n\r\n\t.wrapper .address li {\r\n\t\twidth: 100%;\r\n\t\theight: 18vw;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-bottom: solid 1px #ddd;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .address li .address-info {\r\n\t\twidth: 100%;\r\n\t\tmargin-left: 3vw;\r\n\t}\r\n\r\n\t.wrapper .address li .address-info .address-info-detailed {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .address li .address-info .address-info-detailed p:first-child {\r\n\t\tfont-size: 5vw;\r\n\t\tcolor: #777;\r\n\t\tmargin-right: 2vw;\r\n\t}\r\n\r\n\t.wrapper .address li .address-info .address-info-detailed p:last-child {\r\n\t\tfont-size: 5vw;\r\n\t\tcolor: #777;\r\n\t}\r\n\r\n\t.wrapper .address li .address-info p {\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #777;\r\n\t}\r\n\r\n\t.wrapper .address li .address-icon {\r\n\t\tdisplay: flex;\r\n\t\tmargin-right: 4vw;\r\n\t}\r\n\r\n\t.wrapper .address li .address-icon i {\r\n\t\tfont-size: 5vw;\r\n\t\tcolor: #777;\r\n\t\tmargin-right: 2vw;\r\n\t}\r\n\r\n\t.wrapper .address-new {\r\n\t\twidth: 100%;\r\n\t\theight: 15vw;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-top: solid 1px #ddd;\r\n\t\tborder-bottom: solid 1px #ddd;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .address-new i {\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #0097ff;\r\n\t\tmargin-right: 2vw;\r\n\t}\r\n\r\n\t.wrapper .address-new p {\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #0097ff;\r\n\t}\r\n</style>\r\n"],"mappings":";AAsCC,SACCA,GAAG,EACHC,MAAM,EACNC,SAAS,EACTC,KAAK,EACLC,QAAO,QACD,KAAK;AACZ,SACCC,SAAQ,QACF,YAAY;AACnB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,EAAC,MAAO,IAAI;AACnB,OAAOC,MAAK,MAAO,0BAA0B;AAE7C,eAAe;EACdC,IAAI,EAAE,aAAa;EACnBC,UAAU,EAAE;IACXF;EACD,CAAC;EACDG,KAAKA,CAAA,EAAG;IACP,MAAMC,UAAS,GAAIZ,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMa,IAAG,GAAIb,GAAG,CAAC,CAAC,CAAC,CAAC;IACpB,MAAMc,MAAK,GAAIT,SAAS,CAAC,CAAC;IAC1B,MAAMU,kBAAiB,GAAIf,GAAG,CAAC,EAAE;IAEjCE,SAAS,CAAC,MAAM;MACfW,IAAI,CAACG,KAAI,GAAIC,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;MACvDC,2BAA2B,CAAC,CAAC;IAC9B,CAAC,CAAC;;IAEF;IACA,MAAMC,UAAS,GAAKC,KAAK,IAAK;MAC7B,OAAOR,kBAAkB,CAACC,KAAK,CAACO,KAAK,CAAC,CAACD,UAAS,KAAM,IAAI,IAAG,GAAI,IAAI;IACtE,CAAC;;IAED;IACA,MAAMD,2BAA0B,GAAIA,CAAA,KAAM;MACzCf,KAAK,CAACkB,IAAI,CAAC,uDAAuD,EAAEjB,EAAE,CAACkB,SAAS,CAAC;QAChFC,MAAM,EAAEb,IAAI,CAACG,KAAK,CAACU;MACpB,CAAC,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;QACpBb,kBAAkB,CAACC,KAAI,GAAIY,QAAQ,CAACC,IAAI;QACxC;MACD,CAAC,CAAC,CAACC,KAAK,CAACC,KAAI,IAAK;QACjBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACrB,CAAC,CAAC;IACH,CAAC;IAGD,MAAME,gBAAe,GAAIA,CAAA,KAAM;MAC9BnB,MAAM,CAACoB,IAAI,CAAC;QACXC,IAAI,EAAE;MACP,CAAC,CAAC;MACFhB,cAAc,CAACiB,OAAO,CAAC,YAAY,EAAExB,UAAU,CAAC;IACjD,CAAC;IAED,MAAMyB,eAAc,GAAKC,IAAI,IAAK;MACjCxB,MAAM,CAACoB,IAAI,CAAC;QACXC,IAAI,EAAE;MACP,CAAC,CAAC;MACFhB,cAAc,CAACiB,OAAO,CAAC,MAAM,EAAEE,IAAI,CAAC;IACrC,CAAC;IAED,MAAMC,iBAAgB,GAAKD,IAAI,IAAK;MACnC,IAAI,CAACE,OAAO,CAAC,cAAc,CAAC,EAAE;QAC7B;MACD;MACA;MACAlC,KAAK,CAACkB,IAAI,CAAC,iDAAiD,EAAEjB,EAAE,CAACkB,SAAS,CAAC;QAC1Ea,IAAI,EAAEA;MACP,CAAC,CAAC,CAAC,CAACX,IAAI,CAACC,QAAO,IAAK;QACpB,IAAIA,QAAQ,CAACC,IAAG,GAAI,CAAC,EAAE;UACtB,IAAIY,eAAc,GAAIC,YAAY,CAACtB,OAAO,CAACP,IAAI,CAACG,KAAK,CAACU,MAAM,CAAC;UAC7D,IAAIe,eAAc,IAAK,IAAG,IAAKA,eAAe,CAACH,IAAG,IAAKA,IAAI,EAAE;YAC5DK,kBAAkB,CAAC9B,IAAI,CAACG,KAAK,CAACU,MAAM,CAAC;UACtC;UACAL,2BAA2B,CAAC,CAAC;QAC9B,OAAO;UACNuB,KAAK,CAAC,SAAS,CAAC;QACjB;MACD,CAAC,CAAC,CAACd,KAAK,CAACC,KAAI,IAAK;QACjBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACrB,CAAC,CAAC;IACH,CAAC;IAED,OAAO;MACNnB,UAAU;MACVC,IAAI;MACJE,kBAAkB;MAClBO,UAAU;MACVD,2BAA2B;MAC3BY,gBAAgB;MAChBI,eAAe;MACfE;IACD,CAAC;EACF;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}